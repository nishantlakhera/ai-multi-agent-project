INFO:     Will watch for changes in these directories: ['/Users/nishant.lakhera/projects/learning/ai-multi-agent-project/mcp_service']
INFO:     Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
INFO:     Started reloader process [30566] using StatReload
/Users/nishant.lakhera/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
INFO:     Started server process [30573]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:53075 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:53103 - "GET /health HTTP/1.1" 200 OK
INFO:mcp:Executing web plan: Here is the search plan:

```
{
    "queries": [
        "tesla.com website",
        "tesla officia...
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=tesla.com%20website "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=tesla%20official%20website%20features "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=tesla%20online%20presence "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=tesla.com%20website "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Fwww.tesla.com%2F&rut=9b9f7c60daeecd305c172afadc70bea7f4f642b5723f4376bb5a11ba4cb3d7a7: Request URL is missing an 'http://' or 'https://' protocol.
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=tesla%20official%20website%20features "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Fwww.tesla.com%2Ffeatures&rut=3045975f853f298da2a836465e1cf0858c8cc401fe727b86f568511fb3b1bca4: Request URL is missing an 'http://' or 'https://' protocol.
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=tesla%20online%20presence "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Fwww.projectpractical.com%2Ftesla%2Dmarketing%2Dstrategy%2F&rut=9ed20632dbd26e63738f7bf04461150c2456fc17d7365352a883442409a425d9: Request URL is missing an 'http://' or 'https://' protocol.
INFO:mcp:Web search returned 9 results
INFO:     127.0.0.1:53122 - "POST /plan HTTP/1.1" 200 OK
INFO:mcp:[db_tool] Processing query: How many users?
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:mcp:[db_tool] Generated SQL: SELECT COUNT(*) FROM users;
INFO:mcp:[db_tool] Executed SQL, returned 1 rows
INFO:     127.0.0.1:53240 - "POST /db HTTP/1.1" 200 OK
INFO:mcp:[rag_tool] Searching for: Troubleshoot Confluence
INFO:httpx:HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
/Users/nishant.lakhera/projects/learning/ai-multi-agent-project/mcp_service/tools/rag_tool.py:53: UserWarning: Qdrant client version 1.16.1 is incompatible with server version 1.11.0. Major versions should match and minor version difference must not exceed 1. Set check_compatibility=False to skip version check.
  qdrant_client = QdrantClient(url=QDRANT_URL, prefer_grpc=False)
INFO:httpx:HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:6333/collections/documents/points/query "HTTP/1.1 200 OK"
INFO:mcp:[rag_tool] Found 5 results
INFO:     127.0.0.1:53266 - "POST /rag HTTP/1.1" 200 OK
INFO:mcp:Executing web plan: Here is the search plan:

```
{
    "queries": [
        "AI latest updates",
        "Artificial in...
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=AI%20latest%20updates "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=Artificial%20intelligence%20current%20events "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=AI%20breakthroughs%20and%20advancements "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=AI%20latest%20updates "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Ftechcrunch.com%2Fcategory%2Fartificial%2Dintelligence%2F&rut=3a4e4da06abbb84fbb164d6a7ce08d90877fbd87d793f31a75d076e4d8cfb89e: Request URL is missing an 'http://' or 'https://' protocol.
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=Artificial%20intelligence%20current%20events "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Fnews.google.com%2Ftopics%2FCAAqJAgKIh5DQkFTRUFvSEwyMHZNRzFyZWhJRlpXNHRSMElvQUFQAQ&rut=b8c06b21560315c4b4611b04af3c6f196fa8e4739d0eeaeae4a871780e04b147: Request URL is missing an 'http://' or 'https://' protocol.
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=AI%20breakthroughs%20and%20advancements "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Fnews.microsoft.com%2Fsource%2Ffeatures%2Fai%2F10%2Dscientific%2Dbreakthroughs%2Dfrom%2Dmicrosoft%2Dresearchers%2F&rut=42825670d06b763c9674b6b6598dc1c09b897f85e9907bdb5027cecec7ed6677: Request URL is missing an 'http://' or 'https://' protocol.
INFO:mcp:Web search returned 9 results
INFO:     127.0.0.1:53319 - "POST /plan HTTP/1.1" 200 OK
INFO:mcp:[rag_tool] Searching for: hi
INFO:httpx:HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:6333/collections/documents/points/query "HTTP/1.1 200 OK"
INFO:mcp:[rag_tool] Found 5 results
INFO:     127.0.0.1:54261 - "POST /rag HTTP/1.1" 200 OK
INFO:mcp:[rag_tool] Searching for: tell me about today date 
INFO:httpx:HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:6333/collections/documents/points/query "HTTP/1.1 200 OK"
INFO:mcp:[rag_tool] Found 5 results
INFO:     127.0.0.1:54784 - "POST /rag HTTP/1.1" 200 OK
INFO:mcp:[rag_tool] Searching for: do you know about bangalore ? 
INFO:httpx:HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:6333/collections/documents/points/query "HTTP/1.1 200 OK"
INFO:mcp:[rag_tool] Found 5 results
INFO:     127.0.0.1:54960 - "POST /rag HTTP/1.1" 200 OK
INFO:mcp:[rag_tool] Searching for: what is bangalore ? 
INFO:httpx:HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:6333/collections/documents/points/query "HTTP/1.1 200 OK"
INFO:mcp:[rag_tool] Found 5 results
INFO:     127.0.0.1:55033 - "POST /rag HTTP/1.1" 200 OK
INFO:mcp:[db_tool] Processing query: Count the users in the database AND tell me how to troubleshoot Confluence
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:mcp:[db_tool] Generated SQL: SELECT COUNT(*) FROM users;
INFO:mcp:[db_tool] Executed SQL, returned 1 rows
INFO:     127.0.0.1:55590 - "POST /db HTTP/1.1" 200 OK
INFO:mcp:[db_tool] Processing query: Count all users AND search for Tesla news AND how to troubleshoot Confluence
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:mcp:[db_tool] Generated SQL: SELECT COUNT(*) 
FROM users;
INFO:mcp:[db_tool] Executed SQL, returned 1 rows
INFO:     127.0.0.1:55778 - "POST /db HTTP/1.1" 200 OK
INFO:mcp:[rag_tool] Searching for: Count users AND search Tesla news
INFO:httpx:HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:6333/collections/documents/points/query "HTTP/1.1 200 OK"
INFO:mcp:[rag_tool] Found 5 results
INFO:     127.0.0.1:56045 - "POST /rag HTTP/1.1" 200 OK
INFO:mcp:[db_tool] Processing query: Count users AND search Tesla news
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:mcp:[db_tool] Generated SQL: SELECT COUNT(*) 
FROM users;
INFO:mcp:[db_tool] Executed SQL, returned 1 rows
INFO:     127.0.0.1:56052 - "POST /db HTTP/1.1" 200 OK
INFO:mcp:Executing web plan: Here is the search plan:

```
{
  "queries": [
    "user count AND tesla news",
    "tesla news audi...
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=user%20count%20AND%20tesla%20news "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=tesla%20news%20audience%20size "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=who%20searches%20for%20tesla%20news "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=user%20count%20AND%20tesla%20news "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Fwww.cnbc.com%2F2025%2F09%2F08%2Ftesla%2Dmarket%2Dshare%2Din%2Dus%2Ddrops%2Dto%2Dlowest%2Dsince%2D2017.html&rut=0e1a3c56b37087b890e4f83775c97f72271507a0bba6aea71cdf3fd3c2bf632d: Request URL is missing an 'http://' or 'https://' protocol.
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=tesla%20news%20audience%20size "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Fbusinessmodelanalyst.com%2Ftesla%2Dtarget%2Dmarket%2F&rut=ee65535d320be52a15a2e1e8dd06f71a0508ba70a3e6a3a957b4602971afe056: Request URL is missing an 'http://' or 'https://' protocol.
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=who%20searches%20for%20tesla%20news "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Fwww.teslarati.com%2F&rut=167570cbd7c7f164045e62c2192b0e78583c33b79141ae024e17e031867b36b2: Request URL is missing an 'http://' or 'https://' protocol.
INFO:mcp:Web search returned 9 results
INFO:     127.0.0.1:56072 - "POST /plan HTTP/1.1" 200 OK
INFO:mcp:[rag_tool] Searching for: How many users in database AND how do I troubleshoot Confluence?
INFO:httpx:HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:6333/collections/documents/points/query "HTTP/1.1 200 OK"
INFO:mcp:[rag_tool] Found 5 results
INFO:     127.0.0.1:56267 - "POST /rag HTTP/1.1" 200 OK
INFO:mcp:[db_tool] Processing query: How many users in database AND how do I troubleshoot Confluence?
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:mcp:[db_tool] Generated SQL: SELECT COUNT(*) FROM users;
INFO:mcp:[db_tool] Executed SQL, returned 1 rows
INFO:     127.0.0.1:56277 - "POST /db HTTP/1.1" 200 OK
INFO:mcp:Executing web plan: Here is the search plan:

```
{
    "queries": [
        {"query": "number of users in confluence da...
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q={'query':%20'number%20of%20users%20in%20confluence%20database',%20'extract':%20['approximate%20number%20of%20users',%20'confluence%20user%20count']} "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q={'query':%20'confluence%20troubleshooting%20guide',%20'extract':%20['common%20errors',%20'troubleshooting%20steps',%20'tips%20for%20fixing%20issues']} "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q={'query':%20'confluence%20error%20solutions',%20'extract':%20['step-by-step%20solutions',%20'fixing%20common%20confluence%20errors',%20'resolving%20confluence%20issues']} "HTTP/1.1 202 Accepted"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q={'query':%20'number%20of%20users%20in%20confluence%20database',%20'extract':%20['approximate%20number%20of%20users',%20'confluence%20user%20count']} "HTTP/1.1 202 Accepted"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q={'query':%20'confluence%20troubleshooting%20guide',%20'extract':%20['common%20errors',%20'troubleshooting%20steps',%20'tips%20for%20fixing%20issues']} "HTTP/1.1 202 Accepted"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q={'query':%20'confluence%20error%20solutions',%20'extract':%20['step-by-step%20solutions',%20'fixing%20common%20confluence%20errors',%20'resolving%20confluence%20issues']} "HTTP/1.1 202 Accepted"
INFO:mcp:Web search returned 0 results
INFO:     127.0.0.1:56313 - "POST /plan HTTP/1.1" 200 OK
INFO:mcp:Executing web plan: Here's a short search plan for your question:

```
{
    "queries": [
        "capital of France",
 ...
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=capital%20of%20France "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=what%20is%20the%20capital%20of%20France "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=France%20capital%20city "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=capital%20of%20France "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FParis&rut=c59f28ea5d21c273709b0aebb3e8481dcfde995188d2e8a82bc64b064077dac6: Request URL is missing an 'http://' or 'https://' protocol.
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=what%20is%20the%20capital%20of%20France "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FParis&rut=c59f28ea5d21c273709b0aebb3e8481dcfde995188d2e8a82bc64b064077dac6: Request URL is missing an 'http://' or 'https://' protocol.
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=France%20capital%20city "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FParis&rut=c59f28ea5d21c273709b0aebb3e8481dcfde995188d2e8a82bc64b064077dac6: Request URL is missing an 'http://' or 'https://' protocol.
INFO:mcp:Web search returned 9 results
INFO:     127.0.0.1:56820 - "POST /plan HTTP/1.1" 200 OK
INFO:mcp:[rag_tool] Searching for: Hello, how are you?
INFO:httpx:HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:6333/collections/documents/points/query "HTTP/1.1 200 OK"
INFO:mcp:[rag_tool] Found 5 results
INFO:     127.0.0.1:56941 - "POST /rag HTTP/1.1" 200 OK
INFO:mcp:[rag_tool] Searching for: What is 25 * 47?
INFO:httpx:HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:6333/collections/documents/points/query "HTTP/1.1 200 OK"
INFO:mcp:[rag_tool] Found 5 results
INFO:     127.0.0.1:57059 - "POST /rag HTTP/1.1" 200 OK
INFO:mcp:[db_tool] Processing query: Count users
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:mcp:[db_tool] Generated SQL: SELECT COUNT(*) FROM users;
INFO:mcp:[db_tool] Executed SQL, returned 1 rows
INFO:     127.0.0.1:57924 - "POST /db HTTP/1.1" 200 OK
INFO:mcp:[rag_tool] Searching for: Troubleshoot Confluence
INFO:httpx:HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:6333/collections/documents/points/query "HTTP/1.1 200 OK"
INFO:mcp:[rag_tool] Found 5 results
INFO:     127.0.0.1:57945 - "POST /rag HTTP/1.1" 200 OK
INFO:mcp:Executing web plan: Here is the search plan:

{
"queries": [
"LATEST AI NEWS",
"AIPROGRESS RECENTLY",
"AI DEVELOPMENTS C...
WARNING:mcp:Failed to parse plan as JSON, using as direct query
ERROR:mcp:DuckDuckGo search failed: Invalid non-printable ASCII character in URL, '\n' at position 60.
ERROR:mcp:DuckDuckGo search failed: Invalid non-printable ASCII character in URL, '\n' at position 60.
INFO:mcp:Web search returned 0 results
INFO:     127.0.0.1:57999 - "POST /plan HTTP/1.1" 200 OK
INFO:mcp:[rag_tool] Searching for: Count users AND Tesla news
INFO:httpx:HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:6333/collections/documents/points/query "HTTP/1.1 200 OK"
INFO:mcp:[rag_tool] Found 5 results
INFO:     127.0.0.1:58044 - "POST /rag HTTP/1.1" 200 OK
INFO:mcp:[db_tool] Processing query: Count users AND Tesla news
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:mcp:[db_tool] Generated SQL: SELECT COUNT(u.id) AS total_users, 
       (SELECT COUNT(*) FROM orders WHERE status = 'COMPLETED') AS completed_orders
FROM users u;
INFO:mcp:[db_tool] Executed SQL, returned 1 rows
INFO:     127.0.0.1:58058 - "POST /db HTTP/1.1" 200 OK
INFO:mcp:Executing web plan: Here's a search plan based on the user question:

```
{
    "queries": [
        "site:tesla.com OR ...
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=site:tesla.com%20OR%20site:twitter.com%20(users%20+%20tesla)%20-news "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=tesla%20+%20news%20+%20users "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=site:medium.com%20|%20site:techcrunch.com%20(tesla%20+%20news%20+%20users) "HTTP/1.1 202 Accepted"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=site:tesla.com%20OR%20site:twitter.com%20(users%20+%20tesla)%20-news "HTTP/1.1 202 Accepted"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=tesla%20+%20news%20+%20users "HTTP/1.1 202 Accepted"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=site:medium.com%20|%20site:techcrunch.com%20(tesla%20+%20news%20+%20users) "HTTP/1.1 202 Accepted"
INFO:mcp:Web search returned 0 results
INFO:     127.0.0.1:58090 - "POST /plan HTTP/1.1" 200 OK
INFO:mcp:[db_tool] Processing query: how many users present. ?
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:mcp:[db_tool] Generated SQL: SELECT COUNT(*) FROM users;
INFO:mcp:[db_tool] Executed SQL, returned 1 rows
INFO:     127.0.0.1:58389 - "POST /db HTTP/1.1" 200 OK
INFO:mcp:Executing web plan: Here's a short search plan for the user question:

```
{
    "queries": [
        "Akshay Kumar biog...
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=Akshay%20Kumar%20biography "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=Akshay%20Kumar%20Wikipedia "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=Who%20is%20Akshay%20Kumar%20in%20Hindi%20cinema "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=Akshay%20Kumar%20biography "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FAkshay_Kumar&rut=b00453a4730a388f1a10df309aa67b37629710bfdf4b49037f15c1e56dd2a59e: Request URL is missing an 'http://' or 'https://' protocol.
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=Akshay%20Kumar%20Wikipedia "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FAkshay_Kumar&rut=b00453a4730a388f1a10df309aa67b37629710bfdf4b49037f15c1e56dd2a59e: Request URL is missing an 'http://' or 'https://' protocol.
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=Who%20is%20Akshay%20Kumar%20in%20Hindi%20cinema "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FAkshay_Kumar&rut=b00453a4730a388f1a10df309aa67b37629710bfdf4b49037f15c1e56dd2a59e: Request URL is missing an 'http://' or 'https://' protocol.
INFO:mcp:Web search returned 9 results
INFO:     127.0.0.1:58643 - "POST /plan HTTP/1.1" 200 OK
INFO:mcp:[rag_tool] Searching for: how to troubleshoot confluence 
INFO:httpx:HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:6333/collections/documents/points/query "HTTP/1.1 200 OK"
INFO:mcp:[rag_tool] Found 5 results
INFO:     127.0.0.1:59071 - "POST /rag HTTP/1.1" 200 OK
INFO:mcp:[rag_tool] Searching for: What is my favorite color and how many cats do I have?
INFO:httpx:HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:6333/collections/documents/points/query "HTTP/1.1 200 OK"
INFO:mcp:[rag_tool] Found 5 results
INFO:     127.0.0.1:61019 - "POST /rag HTTP/1.1" 200 OK
INFO:mcp:[db_tool] Processing query: What is my favorite color and how many cats do I have?
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:mcp:[db_tool] Query not relevant to database
INFO:     127.0.0.1:61041 - "POST /db HTTP/1.1" 200 OK
INFO:mcp:Executing web plan: Here's a search plan for the user's question:

```
{
    "queries": [
        "favorite color",
    ...
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=favorite%20color "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=number%20of%20cats%20owned%20by%20me "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=favorite%20color "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Fwww.color%2Dmeanings.com%2Ffind%2Dsymbolic%2Dmeanings%2Dof%2Dyour%2Dfavorite%2Dcolors%2F&rut=40eb52eea5a3acd5307378ba7f602c8c4cd832864efc2c01febc86456d6573aa: Request URL is missing an 'http://' or 'https://' protocol.
INFO:httpx:HTTP Request: GET https://html.duckduckgo.com/html/?q=number%20of%20cats%20owned%20by%20me "HTTP/1.1 200 OK"
ERROR:mcp:Failed to fetch //duckduckgo.com/l/?uddg=https%3A%2F%2Fwww.catster.com%2Flifestyle%2Fhow%2Dmany%2Dcats%2Dcan%2Dyou%2Down%2F&rut=8e9b9bc50453cc03a1f25c7ffe54bd276b2f027ff3b5782111164e01c6268b5c: Request URL is missing an 'http://' or 'https://' protocol.
INFO:mcp:Web search returned 6 results
INFO:     127.0.0.1:61050 - "POST /plan HTTP/1.1" 200 OK
INFO:mcp:[db_tool] Processing query: Show me the structure of conversation_history table
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:mcp:[db_tool] Query not relevant to database
INFO:     127.0.0.1:61861 - "POST /db HTTP/1.1" 200 OK
INFO:mcp:[db_tool] Processing query: how many orders completed today ? 
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:mcp:[db_tool] Generated SQL: SELECT COUNT(*) 
FROM orders 
WHERE status = 'completed' AND EXTRACT(DAY FROM created_at) = EXTRACT(DAY FROM CURRENT_TIMESTAMP) AND EXTRACT(HOUR FROM created_at) = EXTRACT(HOUR FROM CURRENT_TIMESTAMP);
INFO:mcp:[db_tool] Executed SQL, returned 1 rows
INFO:     127.0.0.1:65041 - "POST /db HTTP/1.1" 200 OK
INFO:mcp:[db_tool] Processing query: ok , how many orders are pending ? 
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:mcp:[db_tool] Generated SQL: SELECT COUNT(*) 
FROM orders 
WHERE status = 'pending';
INFO:mcp:[db_tool] Executed SQL, returned 1 rows
INFO:     127.0.0.1:65243 - "POST /db HTTP/1.1" 200 OK
INFO:mcp:[db_tool] Processing query: how many users present ? 
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/v1/chat/completions "HTTP/1.1 200 OK"
INFO:mcp:[db_tool] Generated SQL: SELECT COUNT(*) FROM users;
INFO:mcp:[db_tool] Executed SQL, returned 1 rows
INFO:     127.0.0.1:65380 - "POST /db HTTP/1.1" 200 OK
INFO:mcp:[rag_tool] Searching for: how to troubleshoot login issues ? 
INFO:httpx:HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:6333/collections/documents/points/query "HTTP/1.1 200 OK"
INFO:mcp:[rag_tool] Found 5 results
INFO:     127.0.0.1:49236 - "POST /rag HTTP/1.1" 200 OK
INFO:mcp:[rag_tool] Searching for: hi ai am not getting why you are including order details every time ? 
INFO:httpx:HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://localhost:6333/collections/documents/points/query "HTTP/1.1 200 OK"
INFO:mcp:[rag_tool] Found 5 results
INFO:     127.0.0.1:49548 - "POST /rag HTTP/1.1" 200 OK
INFO:     127.0.0.1:55033 - "GET /docs HTTP/1.1" 200 OK
/Users/nishant.lakhera/Library/Python/3.9/lib/python/site-packages/fastapi/openapi/utils.py:207: UserWarning: Duplicate Operation ID health_health_get for function health at /Users/nishant.lakhera/projects/learning/ai-multi-agent-project/mcp_service/main.py
  warnings.warn(message, stacklevel=1)
INFO:     127.0.0.1:55033 - "GET /openapi.json HTTP/1.1" 200 OK
INFO:     127.0.0.1:55034 - "GET /health HTTP/1.1" 200 OK
